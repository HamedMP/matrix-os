What it describes: Matrix OS is an AI-native OS where the Claude Agent SDK is the kernel. Users speak (or type), the kernel reasons, spawns sub-agents, and writes real software as files. A browser shell renders whatever it  
 finds on disk. The OS self-heals broken apps and self-evolves by modifying its own code.

Core metaphor: Computer architecture mapped to AI components. Context window = RAM, files = disk, sub-agents = processes, session resume = swap/hibernate, knowledge files = demand-paged virtual memory. This isn't decorative --
it drives every design decision.

The stack: TypeScript, Node.js, Hono server, React shell, SQLite, V2 Agent SDK (Opus 4.6 kernel, Sonnet/Haiku for cheaper sub-agents).

What the spec covers
┌────────────────┬──────────────────────────────────────────────────────────────────────────────────────────┬────────────────────────┐
│ Area │ Design │ Status │
├────────────────┼──────────────────────────────────────────────────────────────────────────────────────────┼────────────────────────┤
│ Kernel │ Smart main agent with full tools, routes or handles directly │ Solid │
├────────────────┼──────────────────────────────────────────────────────────────────────────────────────────┼────────────────────────┤
│ Sub-agents │ 5 core (builder, healer, researcher, deployer, evolver) + unlimited custom │ Solid │
├────────────────┼──────────────────────────────────────────────────────────────────────────────────────────┼────────────────────────┤
│ Memory │ 5-layer hierarchy (registers -> L1 -> L2 -> main memory -> disk -> swap), 3% OS overhead │ Solid │
├────────────────┼──────────────────────────────────────────────────────────────────────────────────────────┼────────────────────────┤
│ File system │ Everything is a file. ~/apps, ~/modules, ~/system, ~/agents, ~/data │ Aligned with vision │
├────────────────┼──────────────────────────────────────────────────────────────────────────────────────────┼────────────────────────┤
│ Shell │ Browser desktop, watches filesystem, iframes for apps, theme via CSS vars │ Aligned with vision │
├────────────────┼──────────────────────────────────────────────────────────────────────────────────────────┼────────────────────────┤
│ Self-healing │ Health checks -> healer sub-agent -> patch -> validate -> rollback on failure │ Aligned with vision │
├────────────────┼──────────────────────────────────────────────────────────────────────────────────────────┼────────────────────────┤
│ Self-evolution │ Evolver agent modifies OS source, shell, prompts. Git snapshots for safety │ Aligned with vision │
├────────────────┼──────────────────────────────────────────────────────────────────────────────────────────┼────────────────────────┤
│ Concurrency │ Multiple kernel instances via async I/O, coordinate via process table │ Solid │
├────────────────┼──────────────────────────────────────────────────────────────────────────────────────────┼────────────────────────┤
│ Gateways │ Voice, chat, terminal, API, MCP -- all feed same kernel │ Aligned with vision │
├────────────────┼──────────────────────────────────────────────────────────────────────────────────────────┼────────────────────────┤
│ Safety │ Git snapshots, watchdog, protected files, module backup, file claiming │ Adequate for hackathon │
└────────────────┴──────────────────────────────────────────────────────────────────────────────────────────┴────────────────────────┘
Vision alignment check
┌─────────────────────────────┬────────────────┬─────────────────────────────────────────────────────────────────────────────┐
│ Vision principle │ Spec alignment │ Notes │
├─────────────────────────────┼────────────────┼─────────────────────────────────────────────────────────────────────────────┤
│ Software born on demand │ Aligned │ Builder sub-agent generates from conversation │
├─────────────────────────────┼────────────────┼─────────────────────────────────────────────────────────────────────────────┤
│ Everything is a file │ Aligned │ Core design principle throughout │
├─────────────────────────────┼────────────────┼─────────────────────────────────────────────────────────────────────────────┤
│ Voice-first │ Partial │ Vision says voice is primary. Spec defers voice to P1. Chat/terminal are P0 │
├─────────────────────────────┼────────────────┼─────────────────────────────────────────────────────────────────────────────┤
│ Headless core, multi-shell │ Aligned │ Shell is optional renderer, core works without it │
├─────────────────────────────┼────────────────┼─────────────────────────────────────────────────────────────────────────────┤
│ Self-healing │ Aligned │ Health check loop + healer sub-agent │
├─────────────────────────────┼────────────────┼─────────────────────────────────────────────────────────────────────────────┤
│ Self-evolution │ Aligned │ Evolver agent with git safety │
├─────────────────────────────┼────────────────┼─────────────────────────────────────────────────────────────────────────────┤
│ Proactive (cron, heartbeat) │ Aligned │ Heartbeat kernel instance runs periodically │
├─────────────────────────────┼────────────────┼─────────────────────────────────────────────────────────────────────────────┤
│ Guardrails │ Aligned │ Git snapshots, watchdog, protected files │
├─────────────────────────────┼────────────────┼─────────────────────────────────────────────────────────────────────────────┤
│ Agent-first │ Aligned │ Agent is the kernel, not a sidebar │
├─────────────────────────────┼────────────────┼─────────────────────────────────────────────────────────────────────────────┤
│ Share via files │ Aligned │ Apps are files, agents are markdown files │
├─────────────────────────────┼────────────────┼─────────────────────────────────────────────────────────────────────────────┤
│ Multi-channel access │ Aligned │ 5 gateways, single agent │
└─────────────────────────────┴────────────────┴─────────────────────────────────────────────────────────────────────────────┘
SDK verification corrections (from my audit)
┌────────────────────────────────────────────────────┬──────────┬───────────────────────────────────────────────────────────────────────────────┐
│ Issue │ Severity │ Fix │
├────────────────────────────────────────────────────┼──────────┼───────────────────────────────────────────────────────────────────────────────┤
│ Kernel code uses blocking await query() │ High │ Rewrite to V2 send()/stream() pattern │
├────────────────────────────────────────────────────┼──────────┼───────────────────────────────────────────────────────────────────────────────┤
│ knowledge frontmatter field doesn't exist │ Medium │ Use skills (CLI) or prepend to prompt (SDK) │
├────────────────────────────────────────────────────┼──────────┼───────────────────────────────────────────────────────────────────────────────┤
│ SDK agent definitions simpler than assumed │ Medium │ Only 4 fields (description, prompt, tools, model). Rich features are CLI-only │
├────────────────────────────────────────────────────┼──────────┼───────────────────────────────────────────────────────────────────────────────┤
│ IPC via files assumed, no typed tools │ Medium │ Added custom MCP tools for task list + messaging │
├────────────────────────────────────────────────────┼──────────┼───────────────────────────────────────────────────────────────────────────────┤
│ System prompt defaults to minimal, not Claude Code │ Medium │ Must use preset: "claude_code" with append │
├────────────────────────────────────────────────────┼──────────┼───────────────────────────────────────────────────────────────────────────────┤
│ processes.json race conditions │ Decided │ Already migrated to SQLite in analysis feedback │
└────────────────────────────────────────────────────┴──────────┴───────────────────────────────────────────────────────────────────────────────┘
One gap worth noting

The vision emphasizes "this is not a code editor, not a development environment for programmers" -- but the spec's shell includes Monaco code editor, terminal, and file browser. These are power-user tools. The spec might
benefit from a "casual mode" (hide developer tools, show only apps + chat + voice) vs "power mode" (full desktop with editor/terminal).
